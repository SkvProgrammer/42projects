<!DOCTYPE html>
<html>
	<head>
		<title>42project</title>
		<meta charset="UTF-8" />
		<link rel="icon" href="front/favicon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
		<link rel="stylesheet" href="front/extern/bootstrap.min.css">
		<link rel="stylesheet" href="front/style/index.css">
		<script src="/front/extern/jquery-3.1.1.min.js"></script>
		<script src="/front/extern/bootstrap.min.js"></script>
		<script src="/front/extern/socket.io.min.js"></script>
		<script src="/front/extern/ace-builds/src-min-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>

		<script src="/front/widgets/aceBuilds/object.js"></script>
		<script src="/front/widgets/api/object.js"></script>
		<script src="/front/widgets/tree/object.js"></script>
	</head>
	<body>
	<div class="tab-content" style="height:100%;">
	<div role="tabpanel" class="tab-pane active container-fluid" style="height:100%;overflow:auto;">
	<div class="row" style="height:100%;">
		<div id="div_1_1" class="col-md-6 active_div" style="height:100%;background-color:#f0f0f0;padding:10px;position:relative;">
		</div>
		<div id="div_1_2" class="col-md-6" style="height:100%;background-color:#f0f0f0;padding:10px;position:relative;">
		</div>
		</div>
	</div>
	</div>
	</body>
<script src="/front/core/hub.js"></script>
</html>
<script>

var optionKey = false;
var divX = 1;

$( document ).ready(function() {

	/***************************************************/
	/*      bind keyEvent and mouseEvent for div       */
	/***************************************************/
	window.onkeydown = function(e) {
		var key = e.keyCode ? e.keyCode : e.which;

		if (key == 27 && divX == 2)
			editor.change_focus();
		if (key == 18)
			optionKey = true;
		if (optionKey){
			var change = false;
			if (key == 39){
				$('#div_1_' + divX).toggleClass('active_div');
				change = true;
				divX++;
				if (divX == 3)
					divX = 1;
			}
			if (key == 37){
				$('#div_1_' + divX).toggleClass('active_div');
				change = true;
				divX--;
				if (divX == 0)
					divX = 2;
			}
			if (change)
			{
				$('#div_1_' + divX).toggleClass('active_div');
			}
		}
	}
	window.onkeyup = function(e) {
		var key = e.keyCode ? e.keyCode : e.which;

		if (key == 18)
		{
			optionKey = false;
			if (divX == 2)
			{
				editor.get_focus();
			}
			else
			{
				tree.get_focus();
			}
		}
	}
	$('#div_1_1').on('click', function(){
		$('.active_div').toggleClass('active_div');
		$('#div_1_1').toggleClass('active_div');
		tree.get_focus();
		divX = 1;
	});
	$('#div_1_2').on('click', function(){
		$('.active_div').toggleClass('active_div');
		$('#div_1_2').toggleClass('active_div');
		editor.get_focus();
		divX = 2;
	});
	/* end bind event*/

	/***************************************************/
	/*    create all object and connect each events    */
	/***************************************************/
	editor = new aceBuildsObj($('#div_1_2'), 'editor');
	editor.register('#OnFileOpen', editor.edit_text);
	api = new apiObj();
	api.register('#APIRequestFileOpen', api.requestFileOpen);
	api.register('#APIRequestFileSave', api.requestFileSave);
	tree = new treeObj($('#div_1_1'), 'tree');
	tree.register('#OnTree', tree.apply_tree);
	/* end create objects and binding */
});
</script>
